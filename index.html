<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automatic Website Content Fetcher</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: "Inter", sans-serif;
            background-color: #f0f4f8; /* Light blue-gray background */
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Align items to the start for better layout */
            min-height: 100vh; /* Full viewport height */
            padding: 2rem; /* Padding around the content */
            box-sizing: border-box;
        }
    </style>
</head>
<body class="p-4 sm:p-6 md:p-8">
    <div class="bg-white p-6 sm:p-8 rounded-xl shadow-lg w-full max-w-2xl">
        <h1 class="text-3xl font-bold text-gray-800 mb-6 text-center">Automatically Fetch mysite.com Content</h1>

        <p class="text-gray-700 text-base mb-6 text-center">
            Content from <span class="font-semibold text-blue-600">dwgorsbfamepzexmcgtvmeiecbvp3s30r.oast.fun</span> will load automatically.
        </p>

        <div id="loadingIndicator" class="text-center text-blue-600 font-medium mb-4">
            Fetching content...
        </div>

        <div class="mt-8">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">Fetched Content:</h2>
            <div id="contentDisplay" class="bg-gray-100 p-4 rounded-lg border border-gray-200 overflow-auto max-h-96 text-sm text-gray-900 whitespace-pre-wrap">
                <!-- Fetched content will be displayed here -->
                <p class="text-gray-500">Loading...</p>
            </div>
        </div>

        <!-- Custom Message Box for alerts -->
        <div id="messageBox" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center p-4 z-50 hidden">
            <div class="bg-white rounded-lg p-6 shadow-xl w-full max-w-sm">
                <h3 id="messageBoxTitle" class="text-lg font-semibold text-gray-900 mb-3"></h3>
                <p id="messageBoxContent" class="text-gray-700 mb-5"></p>
                <button id="messageBoxClose" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition duration-200">
                    OK
                </button>
            </div>
        </div>
    </div>

    <script>
        // Get references to HTML elements
        const contentDisplay = document.getElementById('contentDisplay');
        const loadingIndicator = document.getElementById('loadingIndicator');
        const messageBox = document.getElementById('messageBox');
        const messageBoxTitle = document.getElementById('messageBoxTitle');
        const messageBoxContent = document.getElementById('messageBoxContent');
        const messageBoxClose = document.getElementById('messageBoxClose');

        // The URL to fetch (hardcoded)
        const URL_TO_FETCH = 'https://dwgorsbfamepzexmcgtvmeiecbvp3s30r.oast.fun';

        /**
         * Displays a custom alert message box.
         * @param {string} title - The title of the message box.
         * @param {string} message - The content message.
         */
        function showMessageBox(title, message) {
            messageBoxTitle.textContent = title;
            messageBoxContent.textContent = message;
            messageBox.classList.remove('hidden'); // Show the message box
        }

        // Event listener for the close button of the message box
        messageBoxClose.addEventListener('click', () => {
            messageBox.classList.add('hidden'); // Hide the message box
        });

        /**
         * Function to fetch and display content from the URL.
         */
        async function fetchWebsiteContent() {
            // Initially show loading indicator
            loadingIndicator.classList.remove('hidden');
            contentDisplay.innerHTML = '<p class="text-gray-500">Loading...</p>';

            try {
                // Fetch the content from the hardcoded URL
                const response = await fetch(URL_TO_FETCH);

                // Check if the response was successful (status code 200-299)
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status} - ${response.statusText}`);
                }

                // Get the response text
                const contentType = response.headers.get('content-type');
                let content;

                // Attempt to parse as JSON if content-type indicates it
                if (contentType && contentType.includes('application/json')) {
                    try {
                        content = JSON.stringify(await response.json(), null, 2);
                    } catch (jsonError) {
                        // If JSON parsing fails, treat as plain text
                        content = await response.text();
                        showMessageBox('Warning', 'Content-Type was JSON but parsing failed. Displaying as plain text.');
                    }
                } else {
                    // Otherwise, get as plain text
                    content = await response.text();
                }

                // Display the fetched content. Escape HTML to prevent XSS.
                contentDisplay.textContent = content; // Using textContent for safety
                contentDisplay.scrollTop = 0; // Scroll to top of content
            } catch (error) {
                // Handle any errors that occurred during the fetch operation
                console.error('Error fetching website:', error);
                contentDisplay.innerHTML = `<p class="text-red-600 font-semibold">Error: ${error.message}</p>`;
                showMessageBox('Fetch Error', `Could not fetch content from ${URL_TO_FETCH}: ${error.message}. Please note that "mysite.com" is a placeholder and real websites may block direct fetching from other domains due to CORS policies.`);
            } finally {
                loadingIndicator.classList.add('hidden'); // Hide loading indicator
            }
        }

        // Call the fetch function automatically when the DOM is fully loaded
        document.addEventListener('DOMContentLoaded', fetchWebsiteContent);
    </script>
</body>
</html>
